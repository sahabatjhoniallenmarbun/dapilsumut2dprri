<!DOCTYPE html>
<html lang="en" translate="no" class="light-mode primary-mode wf-roboto-n4-inactive wf-roboto-n7-inactive wf-inactive">
<head>
    <link rel="stylesheet" href="assets/css/doiy.css">
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <div class="row col-lg-12 d-flex justify-content-center" data-aos="fade-right" data-aos-delay="100">
               
    
                <!-- Popup <div id="popup" class="hidden">
                    <button id="closePopup">Tutup</button>
                    <div id="socialIcons">
                        <a href="https://facebook.com" target="_blank">
                            <img src="facebook.svg" alt="Facebook">
                        </a>
                        <a href="https://twitter.com" target="_blank">
                            <img src="twitter.svg" alt="Twitter">
                        </a>
                        <a href="https://instagram.com" target="_blank">
                            <img src="instagram.svg" alt="Instagram">
                        </a>
                    </div>
                    <button id="copyLink">Salin Alamat
                        <img src="copy.svg" alt="Salin" class="icon">
                    </button>
                </div> -->
                
            </div>
    


    <!--<section id="twibbon" class="profile-about">
        <div class="twibbonCanvas-container" data-aos="feed-up">
            <div class="row">
                <div class="canvas col-xl-5 d-flex align-items-stretch justify-content-center justify-content-lg-start aos-init aos-animate" data-aos="fade-left" data-aos-delay="100" >
                    <canvas id="twibbonCanvas" width="400" height="400"></canvas>
                </div>
            </div>
        </div>
    </section>-->



    
            <section id="twibbon" class="d-flex justify-content-center align-items-center" style="height: fit-content; padding-left: 5cm; padding-right: 5cm;">
                <div class="row justify-content-center align-self-stretch">
                    <canvas id="twibbonCanvas" width="800px" height="800px"></canvas>
                </div>
                <div class="container-fluid">

                </div>
            </section>
                <section id="btll" class="d-flex justify-content-center align-items-center" style="height: fit-content; padding-left: 5cm; padding-right: 5cm;" >
                    <div class="class="btn round--8 d-flex align-items-center justify-content-center button-choose-photo d-flex align-items-center justify-content-center btn round--8 btn--null btn--lg btn--block"">
                        <input type="file"  id="imageInput" class="class="btn round--8 d-flex align-items-center justify-content-center button-choose-photo d-flex align-items-center justify-content-center btn round--8 btn--null btn--lg btn--block"" >
                        <button id="downloadButton" style="background-color: aqua;">Download</button>
                    </div>
                </section>
                    
                    
                
              
                                   
                                
            <script>
                const downloadButton = document.getElementById('downloadButton');
                const twibbonCanvas = document.getElementById('twibbonCanvas');
                const ctx = twibbonCanvas.getContext('2d');
                const imageInput = document.getElementById('imageInput');
                let uploadedImage;
                let isDragging = false;
                let startX, startY;
                let originalImageX = 0;
                let originalImageY = 0;
                let isTouching = false;
                let touchStartX, touchStartY;
            
                const twibbonImg = new Image();
                twibbonImg.src = 'assets/img/galleripolitik/TWIBBON BARU PAK BOSS-01.png';
            
                // Tambahkan handler untuk memuat gambar Twibbon saat gambar selesai dimuat
                twibbonImg.onload = function () {
                    renderImageWithScale();
                };
            
                imageInput.addEventListener('change', function (event) {
                    const file = imageInput.files[0];
                    if (file) {
                        uploadedImage = new Image();
                        uploadedImage.src = URL.createObjectURL(file);
                        uploadedImage.onload = function () {
                            uploadedImageX = originalImageX;
                            uploadedImageY = originalImageY;
                            renderImageWithScale();
                        };
                    }
                });
            
                twibbonCanvas.addEventListener('mousedown', function (event) {
                    isDragging = true;
                    startX = event.clientX;
                    startY = event.clientY;
                    originalImageX = uploadedImageX;
                    originalImageY = uploadedImageY;
                });
            
                twibbonCanvas.addEventListener('mousemove', function (event) {
                    if (isDragging) {
                        const offsetX = event.clientX - startX;
                        const offsetY = event.clientY - startY;
            
                        uploadedImageX = originalImageX + offsetX;
                        uploadedImageY = originalImageY + offsetY;
            
                        renderImageWithScale();
                    }
                });
            
                twibbonCanvas.addEventListener('mouseup', function () {
                    isDragging = false;
                });
            
                twibbonCanvas.addEventListener('touchstart', function (event) {
                    isTouching = true;
                    touchStartX = event.touches[0].clientX;
                    touchStartY = event.touches[0].clientY;
                });
            
                twibbonCanvas.addEventListener('touchmove', function (event) {
                    if (isTouching) {
                        const offsetX = event.touches[0].clientX - touchStartX;
                        const offsetY = event.touches[0].clientY - touchStartY;
            
                        uploadedImageX = originalImageX + offsetX;
                        uploadedImageY = originalImageY + offsetY;
            
                        renderImageWithScale();
                    }
                });
            
                twibbonCanvas.addEventListener('touchend', function () {
                    isTouching = false;
                });
            
                downloadButton.addEventListener('click', function () {
                    const dataURL = twibbonCanvas.toDataURL('image/png');
                    const a = document.createElement('a');
                    a.href = dataURL;
                    a.download = 'twibbon.png';
                    a.click();
                });
            
                function renderImageWithScale() {
                    ctx.clearRect(0, 0, twibbonCanvas.width, twibbonCanvas.height);
                    // Gambar gambar yang diunggah terlebih dahulu
                    if (uploadedImage) {
                        ctx.drawImage(uploadedImage, uploadedImageX, uploadedImageY, twibbonCanvas.width, twibbonCanvas.height);
                    }
                    // Kemudian gambar Twibbon di atasnya
                    ctx.drawImage(twibbonImg, 0, 0, twibbonCanvas.width, twibbonCanvas.height);
                }
            </script>
            
    
    
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="assets/js/popup.js"></script>
</body>
</html>
